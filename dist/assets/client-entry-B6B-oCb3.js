const s="growi-plugin-default-user-search",l={name:s},o="growi.includeUser.initialized";function a(){const n=Array.from(document.querySelectorAll("label")).find(u=>{var r;const i=((r=u.textContent)==null?void 0:r.trim())??"";return i.includes("/user")||i.includes("下も含む")||i.toLowerCase().includes("include")});let t=null;if(n){const u=n.querySelector('input[type="checkbox"]');if(u&&(t=u),!t){const i=n.getAttribute("for");if(i){const r=document.getElementById(i);r&&r.type==="checkbox"&&(t=r)}}if(t)return{checkbox:t,label:n}}return t=document.querySelector('input[type="checkbox"][name*="user" i], input[type="checkbox"][id*="user" i], input[type="checkbox"][data-testid*="user" i]'),t?{checkbox:t}:null}function d(e,n){if(e.checked)return;(n??e).click(),e.checked||(e.checked=!0,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})));const t=e.closest("form");t&&typeof t.requestSubmit=="function"&&setTimeout(()=>t.requestSubmit(),0)}function c(){if(sessionStorage.getItem(o)==="1")return!0;const e=a();return e?(requestAnimationFrame(()=>{requestAnimationFrame(()=>{d(e.checkbox,e.label??void 0),sessionStorage.setItem(o,"1")})}),!0):!1}function f(){if(c())return;const e=new MutationObserver(()=>{c()&&e.disconnect()});e.observe(document.documentElement,{childList:!0,subtree:!0})}const m=()=>{f()},b=()=>{};window.pluginActivators=window.pluginActivators??{};window.pluginActivators[l.name]={activate:m,deactivate:b};
